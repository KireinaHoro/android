Index: work/glibc-2.17/glibc-compat/nss_compat/compat-grp.c
===================================================================
--- work.orig/glibc-2.17/glibc-compat/nss_compat/compat-grp.c
+++ work/glibc-2.17/glibc-compat/nss_compat/compat-grp.c
@@ -89,7 +89,7 @@ internal_setgrent (ent_t *ent)
 
   if (ent->stream == NULL)
     {
-      ent->stream = fopen ("/etc/group", "r");
+      ent->stream = fopen ("@GENTOO_PORTAGE_EPREFIX@/etc/group", "r");
 
       if (ent->stream == NULL)
 	status = errno == EAGAIN ? NSS_STATUS_TRYAGAIN : NSS_STATUS_UNAVAIL;
Index: work/glibc-2.17/glibc-compat/nss_compat/compat-pwd.c
===================================================================
--- work.orig/glibc-2.17/glibc-compat/nss_compat/compat-pwd.c
+++ work/glibc-2.17/glibc-compat/nss_compat/compat-pwd.c
@@ -205,7 +205,7 @@ internal_setpwent (ent_t *ent)
 
   if (ent->stream == NULL)
     {
-      ent->stream = fopen ("/etc/passwd", "r");
+      ent->stream = fopen ("@GENTOO_PORTAGE_EPREFIX@/etc/passwd", "r");
 
       if (ent->stream == NULL)
 	status = errno == EAGAIN ? NSS_STATUS_TRYAGAIN : NSS_STATUS_UNAVAIL;
Index: work/glibc-2.17/glibc-compat/nss_compat/compat-spwd.c
===================================================================
--- work.orig/glibc-2.17/glibc-compat/nss_compat/compat-spwd.c
+++ work/glibc-2.17/glibc-compat/nss_compat/compat-spwd.c
@@ -157,7 +157,7 @@ internal_setspent (ent_t *ent)
 
   if (ent->stream == NULL)
     {
-      ent->stream = fopen ("/etc/shadow", "r");
+      ent->stream = fopen ("@GENTOO_PORTAGE_EPREFIX@/etc/shadow", "r");
 
       if (ent->stream == NULL)
 	status = errno == EAGAIN ? NSS_STATUS_TRYAGAIN : NSS_STATUS_UNAVAIL;
Index: work/glibc-2.17/glibc-compat/nss_files/files-netgrp.c
===================================================================
--- work.orig/glibc-2.17/glibc-compat/nss_files/files-netgrp.c
+++ work/glibc-2.17/glibc-compat/nss_files/files-netgrp.c
@@ -27,7 +27,7 @@
 #include "nsswitch.h"
 #include "netgroup.h"
 
-#define DATAFILE	"/etc/netgroup"
+#define DATAFILE	"@GENTOO_PORTAGE_EPREFIX@/etc/netgroup"
 
 
 #define EXPAND(needed)							      \
Index: work/glibc-2.17/nis/nss_compat/compat-grp.c
===================================================================
--- work.orig/glibc-2.17/nis/nss_compat/compat-grp.c
+++ work/glibc-2.17/nis/nss_compat/compat-grp.c
@@ -120,7 +120,7 @@ internal_setgrent (ent_t *ent, int stayo
 
   if (ent->stream == NULL)
     {
-      ent->stream = fopen ("/etc/group", "rme");
+      ent->stream = fopen ("@GENTOO_PORTAGE_EPREFIX@/etc/group", "rme");
 
       if (ent->stream == NULL)
 	status = errno == EAGAIN ? NSS_STATUS_TRYAGAIN : NSS_STATUS_UNAVAIL;
Index: work/glibc-2.17/nis/nss_compat/compat-initgroups.c
===================================================================
--- work.orig/glibc-2.17/nis/nss_compat/compat-initgroups.c
+++ work/glibc-2.17/nis/nss_compat/compat-initgroups.c
@@ -136,7 +136,7 @@ internal_setgrent (ent_t *ent)
   else
     ent->blacklist.current = 0;
 
-  ent->stream = fopen ("/etc/group", "rme");
+  ent->stream = fopen ("@GENTOO_PORTAGE_EPREFIX@/etc/group", "rme");
 
   if (ent->stream == NULL)
     status = errno == EAGAIN ? NSS_STATUS_TRYAGAIN : NSS_STATUS_UNAVAIL;
Index: work/glibc-2.17/nis/nss_compat/compat-pwd.c
===================================================================
--- work.orig/glibc-2.17/nis/nss_compat/compat-pwd.c
+++ work/glibc-2.17/nis/nss_compat/compat-pwd.c
@@ -236,7 +236,7 @@ internal_setpwent (ent_t *ent, int stayo
 
   if (ent->stream == NULL)
     {
-      ent->stream = fopen ("/etc/passwd", "rme");
+      ent->stream = fopen ("@GENTOO_PORTAGE_EPREFIX@/etc/passwd", "rme");
 
       if (ent->stream == NULL)
 	status = errno == EAGAIN ? NSS_STATUS_TRYAGAIN : NSS_STATUS_UNAVAIL;
Index: work/glibc-2.17/nis/nss_compat/compat-spwd.c
===================================================================
--- work.orig/glibc-2.17/nis/nss_compat/compat-spwd.c
+++ work/glibc-2.17/nis/nss_compat/compat-spwd.c
@@ -192,7 +192,7 @@ internal_setspent (ent_t *ent, int stayo
 
   if (ent->stream == NULL)
     {
-      ent->stream = fopen ("/etc/shadow", "rme");
+      ent->stream = fopen ("@GENTOO_PORTAGE_EPREFIX@/etc/shadow", "rme");
 
       if (ent->stream == NULL)
 	status = errno == EAGAIN ? NSS_STATUS_TRYAGAIN : NSS_STATUS_UNAVAIL;
Index: work/glibc-2.17/nss/db-Makefile
===================================================================
--- work.orig/glibc-2.17/nss/db-Makefile
+++ work/glibc-2.17/nss/db-Makefile
@@ -18,11 +18,11 @@
 # License along with the GNU C Library; if not, see
 # <http://www.gnu.org/licenses/>.
 
-DATABASES = $(wildcard /etc/passwd /etc/group /etc/ethers /etc/protocols \
-		       /etc/rpc /etc/services /etc/shadow /etc/gshadow \
-		       /etc/netgroup)
+DATABASES = $(wildcard @GENTOO_PORTAGE_EPREFIX@/etc/passwd @GENTOO_PORTAGE_EPREFIX@/etc/group @GENTOO_PORTAGE_EPREFIX@/etc/ethers @GENTOO_PORTAGE_EPREFIX@/etc/protocols \
+		       @GENTOO_PORTAGE_EPREFIX@/etc/rpc @GENTOO_PORTAGE_EPREFIX@/etc/services @GENTOO_PORTAGE_EPREFIX@/etc/shadow @GENTOO_PORTAGE_EPREFIX@/etc/gshadow \
+		       @GENTOO_PORTAGE_EPREFIX@/etc/netgroup)
 
-VAR_DB = /var/db
+VAR_DB = @GENTOO_PORTAGE_EPREFIX@/var/db
 
 AWK = awk
 MAKEDB = makedb --quiet
@@ -30,7 +30,7 @@ MAKEDB = makedb --quiet
 all: $(patsubst %,$(VAR_DB)/%.db,$(notdir $(DATABASES)))
 
 
-$(VAR_DB)/passwd.db: /etc/passwd
+$(VAR_DB)/passwd.db: @GENTOO_PORTAGE_EPREFIX@/etc/passwd
 	@echo -n "$(patsubst %.db,%,$(@F))... "
 	@$(AWK) 'BEGIN { FS=":"; OFS=":" } \
 		 /^[ \t]*$$/ { next } \
@@ -40,7 +40,7 @@ $(VAR_DB)/passwd.db: /etc/passwd
 	$(MAKEDB) -o $@ -
 	@echo "done."
 
-$(VAR_DB)/group.db: /etc/group
+$(VAR_DB)/group.db: @GENTOO_PORTAGE_EPREFIX@/etc/group
 	@echo -n "$(patsubst %.db,%,$(@F))... "
 	@$(AWK) 'BEGIN { FS=":"; OFS=":" } \
 		 /^[ \t]*$$/ { next } \
@@ -62,7 +62,7 @@ $(VAR_DB)/group.db: /etc/group
 	$(MAKEDB) -o $@ -
 	@echo "done."
 
-$(VAR_DB)/ethers.db: /etc/ethers
+$(VAR_DB)/ethers.db: @GENTOO_PORTAGE_EPREFIX@/etc/ethers
 	@echo -n "$(patsubst %.db,%,$(@F))... "
 	@$(AWK) '/^[ \t]*$$/ { next } \
 		 /^[ \t]*#/ { next } \
@@ -71,7 +71,7 @@ $(VAR_DB)/ethers.db: /etc/ethers
 	$(MAKEDB) -o $@ -
 	@echo "done."
 
-$(VAR_DB)/protocols.db: /etc/protocols
+$(VAR_DB)/protocols.db: @GENTOO_PORTAGE_EPREFIX@/etc/protocols
 	@echo -n "$(patsubst %.db,%,$(@F))... "
 	@$(AWK) '/^[ \t]*$$/ { next } \
 		 /^[ \t]*#/ { next } \
@@ -82,7 +82,7 @@ $(VAR_DB)/protocols.db: /etc/protocols
 	$(MAKEDB) -o $@ -
 	@echo "done."
 
-$(VAR_DB)/rpc.db: /etc/rpc
+$(VAR_DB)/rpc.db: @GENTOO_PORTAGE_EPREFIX@/etc/rpc
 	@echo -n "$(patsubst %.db,%,$(@F))... "
 	@$(AWK) '/^[ \t]*$$/ { next } \
 		 /^[ \t]*#/ { next } \
@@ -93,7 +93,7 @@ $(VAR_DB)/rpc.db: /etc/rpc
 	$(MAKEDB) -o $@ -
 	@echo "done."
 
-$(VAR_DB)/services.db: /etc/services
+$(VAR_DB)/services.db: @GENTOO_PORTAGE_EPREFIX@/etc/services
 	@echo -n "$(patsubst %.db,%,$(@F))... "
 	@$(AWK) 'BEGIN { FS="[ \t/]+" } \
 		 /^[ \t]*$$/ { next } \
@@ -109,7 +109,7 @@ $(VAR_DB)/services.db: /etc/services
 	$(MAKEDB) -o $@ -
 	@echo "done."
 
-$(VAR_DB)/shadow.db: /etc/shadow
+$(VAR_DB)/shadow.db: @GENTOO_PORTAGE_EPREFIX@/etc/shadow
 	@echo -n "$(patsubst %.db,%,$(@F))... "
 	@$(AWK) 'BEGIN { FS=":"; OFS=":" } \
 		 /^[ \t]*$$/ { next } \
@@ -129,7 +129,7 @@ $(VAR_DB)/shadow.db: /etc/shadow
 	  echo; \
 	fi
 
-$(VAR_DB)/gshadow.db: /etc/gshadow
+$(VAR_DB)/gshadow.db: @GENTOO_PORTAGE_EPREFIX@/etc/gshadow
 	@echo -n "$(patsubst %.db,%,$(@F))... "
 	@$(AWK) 'BEGIN { FS=":"; OFS=":" } \
 		 /^[ \t]*$$/ { next } \
@@ -149,7 +149,7 @@ $(VAR_DB)/gshadow.db: /etc/gshadow
 	  echo; \
 	fi
 
-$(VAR_DB)/netgroup.db: /etc/netgroup
+$(VAR_DB)/netgroup.db: @GENTOO_PORTAGE_EPREFIX@/etc/netgroup
 	@echo -n "$(patsubst %.db,%,$(@F))... "
 	@$(AWK) 'BEGIN { ini=1 } \
 		 /^[ \t]*$$/ { next } \
Index: work/glibc-2.17/nss/nss_files/files-init.c
===================================================================
--- work.orig/glibc-2.17/nss/nss_files/files-init.c
+++ work/glibc-2.17/nss/nss_files/files-init.c
@@ -34,12 +34,12 @@ static union							\
     }								\
   }
 
-TF (pwd, "/etc/passwd");
-TF (grp, "/etc/group");
-TF (hst, "/etc/hosts");
-TF (resolv, "/etc/resolv.conf", .call_res_init = 1);
-TF (serv, "/etc/services");
-TF (netgr, "/etc/netgroup");
+TF (pwd, "@GENTOO_PORTAGE_EPREFIX@/etc/passwd");
+TF (grp, "@GENTOO_PORTAGE_EPREFIX@/etc/group");
+TF (hst, "@GENTOO_PORTAGE_EPREFIX@/etc/hosts");
+TF (resolv, "@GENTOO_PORTAGE_EPREFIX@/etc/resolv.conf", .call_res_init = 1);
+TF (serv, "@GENTOO_PORTAGE_EPREFIX@/etc/services");
+TF (netgr, "@GENTOO_PORTAGE_EPREFIX@/etc/netgroup");
 
 
 void
Index: work/glibc-2.17/nss/nss_files/files-initgroups.c
===================================================================
--- work.orig/glibc-2.17/nss/nss_files/files-initgroups.c
+++ work/glibc-2.17/nss/nss_files/files-initgroups.c
@@ -31,7 +31,7 @@ _nss_files_initgroups_dyn (const char *u
 			   long int *size, gid_t **groupsp, long int limit,
 			   int *errnop)
 {
-  FILE *stream = fopen ("/etc/group", "rce");
+  FILE *stream = fopen ("@GENTOO_PORTAGE_EPREFIX@/etc/group", "rce");
   if (stream == NULL)
     {
       *errnop = errno;
Index: work/glibc-2.17/resolv/netdb.h
===================================================================
--- work.orig/glibc-2.17/resolv/netdb.h
+++ work/glibc-2.17/resolv/netdb.h
@@ -42,12 +42,12 @@
 #include <bits/netdb.h>
 
 /* Absolute file name for network data base files.  */
-#define	_PATH_HEQUIV		"/etc/hosts.equiv"
-#define	_PATH_HOSTS		"/etc/hosts"
-#define	_PATH_NETWORKS		"/etc/networks"
-#define	_PATH_NSSWITCH_CONF	"/etc/nsswitch.conf"
-#define	_PATH_PROTOCOLS		"/etc/protocols"
-#define	_PATH_SERVICES		"/etc/services"
+#define	_PATH_HEQUIV		"@GENTOO_PORTAGE_EPREFIX@/etc/hosts.equiv"
+#define	_PATH_HOSTS		"@GENTOO_PORTAGE_EPREFIX@/etc/hosts"
+#define	_PATH_NETWORKS		"@GENTOO_PORTAGE_EPREFIX@/etc/networks"
+#define	_PATH_NSSWITCH_CONF	"@GENTOO_PORTAGE_EPREFIX@/etc/nsswitch.conf"
+#define	_PATH_PROTOCOLS		"@GENTOO_PORTAGE_EPREFIX@/etc/protocols"
+#define	_PATH_SERVICES		"@GENTOO_PORTAGE_EPREFIX@/etc/services"
 
 
 __BEGIN_DECLS
Index: work/glibc-2.17/sysdeps/generic/paths.h
===================================================================
--- work.orig/glibc-2.17/sysdeps/generic/paths.h
+++ work/glibc-2.17/sysdeps/generic/paths.h
@@ -33,43 +33,43 @@
 #define	_PATHS_H_
 
 /* Default search path. */
-#define	_PATH_DEFPATH	"/usr/bin:/bin"
+#define	_PATH_DEFPATH	"@GENTOO_PORTAGE_EPREFIX@/usr/bin:@GENTOO_PORTAGE_EPREFIX@/bin"
 /* All standard utilities path. */
 #define	_PATH_STDPATH \
-	"/usr/bin:/bin:/usr/sbin:/sbin"
+	"@GENTOO_PORTAGE_EPREFIX@/usr/bin:@GENTOO_PORTAGE_EPREFIX@/bin:@GENTOO_PORTAGE_EPREFIX@/usr/sbin:@GENTOO_PORTAGE_EPREFIX@/sbin"
 
-#define	_PATH_BSHELL	"/bin/sh"
+#define	_PATH_BSHELL	"@GENTOO_PORTAGE_EPREFIX@/bin/sh"
 #define	_PATH_CONSOLE	"/dev/console"
-#define	_PATH_CSHELL	"/bin/csh"
-#define	_PATH_DEVDB	"/var/run/dev.db"
+#define	_PATH_CSHELL	"@GENTOO_PORTAGE_EPREFIX@/bin/csh"
+#define	_PATH_DEVDB	"@GENTOO_PORTAGE_EPREFIX@/var/run/dev.db"
 #define	_PATH_DEVNULL	"/dev/null"
 #define	_PATH_DRUM	"/dev/drum"
-#define	_PATH_GSHADOW	"/etc/gshadow"
+#define	_PATH_GSHADOW	"@GENTOO_PORTAGE_EPREFIX@/etc/gshadow"
 #define	_PATH_KMEM	"/dev/kmem"
-#define	_PATH_LASTLOG	"/var/log/lastlog"
+#define	_PATH_LASTLOG	"@GENTOO_PORTAGE_EPREFIX@/var/log/lastlog"
 #define	_PATH_MAILDIR	"/var/mail"
-#define	_PATH_MAN	"/usr/share/man"
+#define	_PATH_MAN	"@GENTOO_PORTAGE_EPREFIX@/usr/share/man"
 #define	_PATH_MEM	"/dev/mem"
-#define	_PATH_MNTTAB	"/etc/fstab"
-#define	_PATH_MOUNTED	"/var/run/mtab"
-#define	_PATH_NOLOGIN	"/etc/nologin"
-#define	_PATH_PRESERVE	"/var/lib"
-#define	_PATH_RWHODIR	"/var/spool/rwho"
-#define	_PATH_SENDMAIL	"/usr/sbin/sendmail"
-#define	_PATH_SHADOW	"/etc/shadow"
-#define	_PATH_SHELLS	"/etc/shells"
+#define	_PATH_MNTTAB	"@GENTOO_PORTAGE_EPREFIX@/etc/fstab"
+#define	_PATH_MOUNTED	"@GENTOO_PORTAGE_EPREFIX@/var/run/mtab"
+#define	_PATH_NOLOGIN	"@GENTOO_PORTAGE_EPREFIX@/etc/nologin"
+#define	_PATH_PRESERVE	"@GENTOO_PORTAGE_EPREFIX@/var/lib"
+#define	_PATH_RWHODIR	"@GENTOO_PORTAGE_EPREFIX@/var/spool/rwho"
+#define	_PATH_SENDMAIL	"@GENTOO_PORTAGE_EPREFIX@/usr/sbin/sendmail"
+#define	_PATH_SHADOW	"@GENTOO_PORTAGE_EPREFIX@/etc/shadow"
+#define	_PATH_SHELLS	"@GENTOO_PORTAGE_EPREFIX@/etc/shells"
 #define	_PATH_TTY	"/dev/tty"
 #define	_PATH_UNIX	"/vmunix"
-#define	_PATH_UTMP	"/var/run/utmp"
-#define	_PATH_UTMP_DB	"/var/run/utmp.db"
-#define	_PATH_VI	"/usr/bin/vi"
+#define	_PATH_UTMP	"@GENTOO_PORTAGE_EPREFIX@/var/run/utmp"
+#define	_PATH_UTMP_DB	"@GENTOO_PORTAGE_EPREFIX@/var/run/utmp.db"
+#define	_PATH_VI	"@GENTOO_PORTAGE_EPREFIX@/usr/bin/vi"
 #define	_PATH_WTMP	"/var/log/wtmp"
 
 /* Provide trailing slash, since mostly used for building pathnames. */
 #define	_PATH_DEV	"/dev/"
 #define	_PATH_TMP	"/tmp/"
-#define	_PATH_VARDB	"/var/db/"
-#define	_PATH_VARRUN	"/var/run/"
+#define	_PATH_VARDB	"@GENTOO_PORTAGE_EPREFIX@/var/db/"
+#define	_PATH_VARRUN	"@GENTOO_PORTAGE_EPREFIX@/var/run/"
 #define	_PATH_VARTMP	"/var/tmp/"
 
 #endif /* !_PATHS_H_ */
Index: work/glibc-2.17/sysdeps/unix/sysv/linux/paths.h
===================================================================
--- work.orig/glibc-2.17/sysdeps/unix/sysv/linux/paths.h
+++ work/glibc-2.17/sysdeps/unix/sysv/linux/paths.h
@@ -33,43 +33,43 @@
 #define	_PATHS_H_
 
 /* Default search path. */
-#define	_PATH_DEFPATH	"/usr/bin:/bin"
+#define	_PATH_DEFPATH	"@GENTOO_PORTAGE_EPREFIX@/usr/bin:@GENTOO_PORTAGE_EPREFIX@/bin"
 /* All standard utilities path. */
 #define	_PATH_STDPATH \
-	"/usr/bin:/bin:/usr/sbin:/sbin"
+	"@GENTOO_PORTAGE_EPREFIX@/usr/bin:@GENTOO_PORTAGE_EPREFIX@/bin:@GENTOO_PORTAGE_EPREFIX@/usr/sbin:@GENTOO_PORTAGE_EPREFIX@/sbin"
 
-#define	_PATH_BSHELL	"/bin/sh"
+#define	_PATH_BSHELL	"@GENTOO_PORTAGE_EPREFIX@/bin/sh"
 #define	_PATH_CONSOLE	"/dev/console"
-#define	_PATH_CSHELL	"/bin/csh"
-#define	_PATH_DEVDB	"/var/run/dev.db"
+#define	_PATH_CSHELL	"@GENTOO_PORTAGE_EPREFIX@/bin/csh"
+#define	_PATH_DEVDB	"@GENTOO_PORTAGE_EPREFIX@/var/run/dev.db"
 #define	_PATH_DEVNULL	"/dev/null"
 #define	_PATH_DRUM	"/dev/drum"
-#define	_PATH_GSHADOW	"/etc/gshadow"
+#define	_PATH_GSHADOW	"@GENTOO_PORTAGE_EPREFIX@/etc/gshadow"
 #define	_PATH_KLOG	"/proc/kmsg"
 #define	_PATH_KMEM	"/dev/kmem"
 #define	_PATH_LASTLOG	"/var/log/lastlog"
 #define	_PATH_MAILDIR	"/var/mail"
-#define	_PATH_MAN	"/usr/share/man"
+#define	_PATH_MAN	"@GENTOO_PORTAGE_EPREFIX@/usr/share/man"
 #define	_PATH_MEM	"/dev/mem"
-#define	_PATH_MNTTAB	"/etc/fstab"
-#define	_PATH_MOUNTED	"/etc/mtab"
-#define	_PATH_NOLOGIN	"/etc/nologin"
-#define	_PATH_PRESERVE	"/var/lib"
-#define	_PATH_RWHODIR	"/var/spool/rwho"
-#define	_PATH_SENDMAIL	"/usr/sbin/sendmail"
-#define	_PATH_SHADOW	"/etc/shadow"
-#define	_PATH_SHELLS	"/etc/shells"
+#define	_PATH_MNTTAB	"@GENTOO_PORTAGE_EPREFIX@/etc/fstab"
+#define	_PATH_MOUNTED	"@GENTOO_PORTAGE_EPREFIX@/etc/mtab"
+#define	_PATH_NOLOGIN	"@GENTOO_PORTAGE_EPREFIX@/etc/nologin"
+#define	_PATH_PRESERVE	"@GENTOO_PORTAGE_EPREFIX@/var/lib"
+#define	_PATH_RWHODIR	"@GENTOO_PORTAGE_EPREFIX@/var/spool/rwho"
+#define	_PATH_SENDMAIL	"@GENTOO_PORTAGE_EPREFIX@/usr/sbin/sendmail"
+#define	_PATH_SHADOW	"@GENTOO_PORTAGE_EPREFIX@/etc/shadow"
+#define	_PATH_SHELLS	"@GENTOO_PORTAGE_EPREFIX@/etc/shells"
 #define	_PATH_TTY	"/dev/tty"
 #define	_PATH_UNIX	"/boot/vmlinux"
-#define	_PATH_UTMP	"/var/run/utmp"
-#define	_PATH_VI	"/usr/bin/vi"
+#define	_PATH_UTMP	"@GENTOO_PORTAGE_EPREFIX@/var/run/utmp"
+#define	_PATH_VI	"@GENTOO_PORTAGE_EPREFIX@/usr/bin/vi"
 #define	_PATH_WTMP	"/var/log/wtmp"
 
 /* Provide trailing slash, since mostly used for building pathnames. */
 #define	_PATH_DEV	"/dev/"
 #define	_PATH_TMP	"/tmp/"
-#define	_PATH_VARDB	"/var/db/"
-#define	_PATH_VARRUN	"/var/run/"
+#define	_PATH_VARDB	"@GENTOO_PORTAGE_EPREFIX@/var/db/"
+#define	_PATH_VARRUN	"@GENTOO_PORTAGE_EPREFIX@/var/run/"
 #define	_PATH_VARTMP	"/var/tmp/"
 
 #endif /* !_PATHS_H_ */
Index: work/glibc-2.17/nss/bug-erange.c
===================================================================
--- work.orig/glibc-2.17/nss/bug-erange.c
+++ work/glibc-2.17/nss/bug-erange.c
@@ -37,7 +37,7 @@ main (void)
     {
       printf ("gethostbyname_r failed: %s (errno: %m)\n", strerror (res));
 
-      if (access ("/etc/resolv.conf", R_OK))
+      if (access ("@GENTOO_PORTAGE_EPREFIX@/etc/resolv.conf", R_OK))
 	{
 	  puts ("DNS probably not set up");
 	  return 0;
Index: work/glibc-2.17/resolv/resolv.h
===================================================================
--- work.orig/glibc-2.17/resolv/resolv.h
+++ work/glibc-2.17/resolv/resolv.h
@@ -170,7 +170,7 @@ typedef struct __res_state *res_state;
  */
 
 #ifndef _PATH_RESCONF
-#define _PATH_RESCONF        "/etc/resolv.conf"
+#define _PATH_RESCONF        "@GENTOO_PORTAGE_EPREFIX@/etc/resolv.conf"
 #endif
 
 struct res_sym {
